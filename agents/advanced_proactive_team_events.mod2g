use common.commonKnowledge as knowledge.
use common.adoptGoals as module.
use common.events as module.
use common.com_basic as module.
use common.com_block_info as module.
use common.com_visited as module.
use common.lookahead as module.

module blockComTeamEvents {
	
	if true then comBasic.
	
	if true then comBlocks.
	if true then comVisited.
	
	if true then lookAhead.
	
	if true then events.
	
	forall (Agt).sent( msg(grabbing(BlockID)) ) do insert ( grabbing(Agt, BlockID) ).
	forall (Agt).sent( msg(notGrabbing(BlockID)) ) do delete ( grabbing(Agt, BlockID) ).
	
	if a-goal( in(Place), holding(BlockID) ) then insert( grabbing(BlockID), 
		send('allother', grabbing(BlockID)) ).
	if bel( grabbing(BlockID) ), not(goal(in(_), holding(BlockID))) then delete( grabbing(BlockID) )
		+ insert( send('allother', notGrabbing(BlockID)) ).
	
	forall bel( grabbing(BlockID), grabbing(Agt, BlockID), me(Me), Me < Agt ), 
		a-goal( in(Place), holding(BlockID) ) do drop (in(Place), holding(BlockID)) + 
		delete( grabbing(BlockID) ) + insert( send('allother', notGrabbing(BlockID)) ).
}