use common.commonKnowledge as knowledge.
use common.adoptGoals as module.
use common.events as module.
use common.com_basic as module.
use common.com_block_info as module.
use common.com_visited as module.

module blockComTeamEvents {
	
	if true then comBasic.
	
	if true then comBlocks.
	if true then comVisited.
	
	% maintain agent list.
	forall (Agt).sent( msg(_) ), bel( not(agent(Agt)) ) do insert( agent(Agt) ).
	
	% Update aheadState
	forall (Agt).sent( msg(holding(BlockID)) ), bel(not(holding(Agt, BlockID))) do 
		insert( holding(Agt, BlockID) ).
	forall (Agt).sent( msg(notHolding(BlockID)) ) do delete( holding(Agt, BlockID) ).
	if percept( holding(BlockID) ) then insert( send('allother', holding(BlockID)) ).
	if percept( not(holding(BlockID)) ) then insert( send('allother', notHolding(BlockID)) ).
	
	if true then events.
}