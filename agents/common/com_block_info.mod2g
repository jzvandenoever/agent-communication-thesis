use commonKnowledge as knowledge.
use adoptGoals as module.
order=linearall.

module comBlocks {
	forall (Agt).sent( msg(block(BlockID, ColorID, Place)) ), bel( block(BlockID, ColorID, OtherPlace), 
		Place \= OtherPlace ) do delete( block(BlockID, ColorID, OtherPlace) ) + 
		insert( block(BlockID, ColorID, Place) ).
	forall (Agt).sent( msg(block(BlockID, ColorID, Place)) ), bel( not(block(BlockID, ColorID, Place)) ) 
		do insert( block(BlockID, ColorID, Place) ).
	forall (Agt).sent( msg(heldblock(BlockID)) ), bel( block(BlockID, ColorID, Place) ) 
		do delete( block(BlockID, ColorID, Place) ) + insert( block(BlockID, ColorID, held) ).
	
	% Transmit block related info
	forall percept( color(BlockID, ColorID), in(Place) ), bel( not(block(BlockID, ColorID, Place)) ) 
			do allother.send(msg(block(BlockID, ColorID, Place)) ).
	forall percept(holding(BlockID)) do allother.send(msg(heldblock(BlockID)) ).
}